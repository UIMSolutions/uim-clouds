Alles klar â€” du willst also dein vibe.dâ€‘fÃ¤higes Dâ€‘Entwicklungsimage in Richtung Microserviceâ€‘Architektur weiterziehen. Perfekt, denn vibe.d eignet sich hervorragend fÃ¼r leichtgewichtige, modulare Services.

Ich gebe dir jetzt ein komplettes, professionelles Microserviceâ€‘GrundgerÃ¼st, das:

- in Podman lÃ¤uft  
- ein sauberes D/vibe.dâ€‘Image nutzt  
- SSL + libevent enthÃ¤lt  
- einen klaren Serviceâ€‘Entryâ€‘Point hat  
- fÃ¼r horizontale Skalierung vorbereitet ist  

Und du bekommst ein Beispielâ€‘Service, das du sofort starten kannst.

---

ðŸ§± 1. Basisâ€‘Image fÃ¼r Microservices (mit SSL + libevent)

Das ist dein Baseâ€‘Image, das alle Microservices nutzen kÃ¶nnen:

`Dockerfile
FROM ubuntu:24.04

RUN apt-get update && apt-get install -y \
    wget \
    git \
    gcc \
    make \
    ca-certificates \
    pkg-config \
    libssl-dev \
    libevent-dev \
    && rm -rf /var/lib/apt/lists/*

RUN wget https://dlang.org/install.sh -O install.sh && \
    bash install.sh dmd && \
    rm install.sh

ENV PATH="/root/dlang/dmd-*/bin:${PATH}"

vibe.d vorbereiten
RUN dub fetch vibe-d && dub build vibe-d

WORKDIR /app

CMD ["bash"]
`

Baue es:

`bash
podman build -t dmd-vibe-base .
`

---

ðŸ§© 2. Beispielâ€‘Microservice (HTTPâ€‘API)

Struktur:

`
service/
 â”œâ”€ source/
 â”‚   â””â”€ app.d
 â”œâ”€ dub.json
 â””â”€ Dockerfile
`

dub.json

`json
{
    "name": "example-service",
    "dependencies": {
        "vibe-d": "~>0.9.7"
    },
    "versions": ["VibeDefaultMain"]
}
`

source/app.d

`d
import vibe.vibe;

shared static this()
{
    auto router = new URLRouter;

    router.get("/health", (req, res) {
        res.writeJson(["status": "ok"]);
    });

    router.get("/hello", (req, res) {
        res.writeJson(["message": "Hello from Microservice"]);
    });

    auto settings = new HTTPServerSettings;
    settings.port = 8080;
    settings.bindAddresses = ["0.0.0.0"];

    listenHTTP(settings, router);
}
`

---

ðŸ“¦ 3. Dockerfile fÃ¼r den Microservice

`Dockerfile
FROM dmd-vibe-base

WORKDIR /app

COPY . .

RUN dub build --build=release

EXPOSE 8080

CMD ["./example-service"]
`

Baue den Service:

`bash
podman build -t example-service .
`

---

ðŸš€ 4. Microservice starten

`bash
podman run -p 8080:8080 example-service
`

Testen:

`bash
curl http://localhost:8080/health
curl http://localhost:8080/hello
`

---

ðŸ§± 5. Microservices orchestrieren (Podman Compose)

podman-compose.yml:

`yaml
version: "3.9"

services:
  example:
    image: example-service
    ports:
      - "8080:8080"
    restart: always
`

Starten:

`bash
podman-compose up -d
`

---

ðŸ§  6. Wie du das weiter skalierst

Du kannst jetzt:

- mehrere vibe.dâ€‘Services bauen  
- sie Ã¼ber einen Reverseâ€‘Proxy (Traefik, Caddy, Nginx) bÃ¼ndeln  
- interne Kommunikation Ã¼ber Podmanâ€‘Netzwerke machen  
- Configs Ã¼ber ENVâ€‘Variablen injizieren  
- Healthâ€‘Checks fÃ¼r Autoâ€‘Restart nutzen  

Wenn du willst, kann ich dir:

- ein komplettes Microserviceâ€‘Template bauen  
- ein Serviceâ€‘Meshâ€‘Setup (Traefik + Podman) erstellen  
- ein Eventâ€‘Drivenâ€‘System mit vibe.d + Redis Queue entwerfen  
- oder mehrere Services (Auth, API, Worker, Gateway) generieren  

Sag mir einfach, welchen Microservice du als NÃ¤chstes brauchst.